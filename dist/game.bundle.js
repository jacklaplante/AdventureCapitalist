(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,n,t){"use strict";t.r(n),function(e){t.d(n,"start",(function(){return p})),t.d(n,"load",(function(){return d})),t.d(n,"showHint",(function(){return g})),t.d(n,"hideHint",(function(){return m})),t.d(n,"updateMoney",(function(){return f})),t.d(n,"contextMenu",(function(){return M}));var o=t(3),i=t(5),a=t(6),s=t(7),l=t(4),c=t(8);const r=new o.i;function u(){requestAnimationFrame(u);var e=r.getDelta();i.a.animate(e),s.a.render(i.a,a.a)}function d(){document.body.appendChild(s.a.domElement),u()}function p(){f(e.player.money),document.getElementById("splash").remove(),e.player.new&&g("Click on the egg to start an egg business!"),e.player.businessData&&c.a.loadBusinessData(e.player.businessData),document.addEventListener("mousedown",C),document.addEventListener("mousemove",y),document.addEventListener("mouseup",k),document.addEventListener("wheel",b)}function g(e){O.element.style.display="inline-block",O.message.innerText=e}function m(){O.element.style.display="none"}function f(){document.getElementById("money").innerText=Object(l.c)(e.player.money)}function b(){let e=.005*-event.deltaY,n=new o.qb;a.a.getWorldDirection(n);let t=a.a.position.clone().add(n.normalize().multiplyScalar(e));a.a.updatePosition(t)}function y(e){if(w){let n=.001*a.a.position.length(),t=new o.qb(-e.movementX*n,e.movementY*n,0),i=a.a.localToWorld(t);a.a.updatePosition(i)}}window.addEventListener("resize",(function(){let e=window.innerWidth,n=window.innerHeight;s.a.setSize(e,n,!1),a.a.aspect=e/n,a.a.updateProjectionMatrix()}));var h,w=!1;function C(e){if("CANVAS"!=e.target.tagName)return;w=!0;let n=_(e);h&&n&&n.position.equals(h.position)||(M.menu.style.display="none",x.style.display="none"),h=n}var x=document.getElementById("purchase-business");function k(e){w=!1;let n=_(e);h&&n&&n.position.equals(h.position)&&n.onclick&&n.onclick(e.pageX,e.pageY)}function _(e){var n=new o.db;n.setFromCamera(new o.pb(e.clientX/window.innerWidth*2-1,-e.clientY/window.innerHeight*2+1),a.a);var t=n.intersectObjects(c.a.getClickables());if(t.length>0&&t[0].object.onclick)return t[0].object}const M={menu:document.getElementById("context-menu"),upgrade:document.getElementById("upgrade-button"),upgradeCost:document.getElementById("upgrade-button").querySelector(".cost"),manager:document.getElementById("manager-button"),managerCost:document.getElementById("manager-button").querySelector(".cost"),businessInfo:{info:document.getElementById("business-info").querySelector(".info"),profit:document.getElementById("business-info").querySelector(".cost")}},O={element:document.getElementById("hint"),message:document.getElementById("hint").querySelector(".message"),close:document.getElementById("hint").querySelector(".close")};O.close.onclick=e=>m()}.call(this,t(0))},,function(e,n,t){"use strict";(function(e){function o(e){return"$"+e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function i(e,n){var t;return e.animations.forEach(e=>{e.name!==n||(t=e)}),null==t&&console.error("animation: "+n+" cannot be found!"),t}t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return i})),t.d(n,"b",(function(){return s}));const a=new XMLHttpRequest;function s(){a.open("POST","https://k5qf9mar6h.execute-api.us-east-1.amazonaws.com/test/user?userName="+e.player.name),a.setRequestHeader("Content-Type","application/json"),a.send(JSON.stringify({money:e.player.money,businesses:l()}))}function l(){let e={};return Object.keys(businesses).forEach(n=>{let t=businesses[n];t.building&&(e[n]={floors:t.building.floorCount,hasManager:t.hasManager,lastPickupTime:t.lastPickupTime})}),JSON.stringify(e)}}).call(this,t(0))},function(e,n,t){"use strict";var o=t(3);const i=4824167,a=16774880;var s=new o.fb;s.clickables=[],s.add(new o.q(16777147,3700253,.75)),s.add(new o.l(a));let l=new o.V(1e4,1e4),c=new o.K({color:i}),r=new o.J(l,c);r.rotateX(-Math.PI/2),s.add(r),s.animate=function(e){this.animationMixers.forEach(n=>{n.update(e)})},s.animationMixers=[],s.clickables=[];n.a=s},function(e,n,t){"use strict";var o=t(3),i=window.innerWidth,a=window.innerHeight,s=new o.T(50,i/a,.1,1e4);s.listener=new o.c,s.add(s.listener),s.position.copy(new o.qb(5,15,20)),s.rotateOnAxis(new o.qb(1,0,0),-.5);s.pan=function(e,n){s.position.x-=.01*e,s.position.z-=.01*n},s.updatePosition=function(e){e.z>4&&e.z<100&&e.y>1&&s.position.copy(e)},n.a=s},function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var o=new(t(3).tb)({antialias:!0,alpha:!0});o.setClearColor("#e5e5e5"),o.setSize(window.innerWidth,window.innerHeight,!1),o.setPixelRatio(window.devicePixelRatio),o.gammaOutput=!0,o.gammaFactor=2.2},function(e,n,t){"use strict";(function(e){var o=t(3),i=t(9),a=t(4),s=t(2),l={position:new o.qb(-3,0,0),profit:10,productionRate:1,upgradeCost:10,managerCost:100,purchaseCost:50,shadowSize:2};e.businesses={};const c=e.businesses;["eggs","waffles","coffeeMugs","soccerBalls","topHats"].forEach(e=>{c[e]=function(e){let n=e.replace(/([A-Z])/g," $1");n=n.charAt(0).toUpperCase()+n.slice(1);let t={position:l.position.clone(),profit:l.profit,productionRate:l.productionRate,upgradeCost:l.upgradeCost,managerCost:l.managerCost,hasManager:!1,type:e,name:n,purchaseCost:l.purchaseCost,shadowSize:l.shadowSize};return Object(i.a)(t,e),l.position.x+=7,l.profit*=5,l.productionRate*=.5,l.upgradeCost*=5,l.managerCost*=5,l.purchaseCost*=5,l.shadowSize*=1.2,t}(e)}),c.getClickables=function(){let e=[];return Object.keys(c).forEach(n=>{let t=c[n];t.building&&t.building.clickable&&e.push(t.building.clickable)}),e},c.loadBusinessData=function(n){Object.keys(c).forEach(t=>{let o=c[t];if(o.building&&n&&n[o.type]&&n[o.type].floors>0){let t=o.building,i=n[o.type];t.addBuilding();let l=i.floors,c=1*t.floors[0].loadingAnim.getClip().duration/o.productionRate+1*Object(a.a)(t.middleGltf,"loading.001").duration/o.productionRate*(l-1);if(l>1)for(let e=1;e<l;e++)t.addFloor();if(i.hasManager&&t.addManager(),i.lastPickupTime){let n,a=(Date.now()-i.lastPickupTime)/1e3;if(i.hasManager){let t=a/c;e.player.money+=Math.floor(t)*o.profit*o.building.floorCount,Object(s.updateMoney)(),n=c*(a/c%1)}else n=a>c?c:a;for(let e=t.floorCount-1;e>=0;e--)if(n>0){let i=t.floors[e],a=1*i.loadingAnim.getClip().duration/o.productionRate;n>a?(i.loadingAnim.time=i.loadingAnim.getClip().duration,i.loadingAnim.play().paused=!0,n-=a):(i.loadingAnim.time=n*o.productionRate,i.loadingAnim.play(),n=0)}}}})},n.a=c}).call(this,t(0))},function(e,n,t){"use strict";(function(e){t.d(n,"a",(function(){return g}));var o=t(3),i=t(5),a=t(4),s=t(2),l=t(10),c=t(11),r=t.n(c);const u=t(12),d=new l.a,p=new o.lb;function g(n,t){n.building={floors:[],floorCount:0,moneyToBePickedUp:-1};let l=n.building;!function(n){(function(e){let n=e.building;d.load(m("product",e.type),t=>{t.scene.position.copy(e.position),i.a.add(t.scene),p.load(r.a,n=>{let i=e.shadowSize,a=new o.J(new o.U(i,i),new o.K({map:n,transparent:!0,depthWrite:!1}));a.rotateX(-Math.PI/2),t.scene.add(a),a.position.y+=.8}),n.top=t.scene;let s=new o.b(t.scene),l=Object(a.a)(t,"rotate"),c=s.clipAction(l);c.play(),i.a.animationMixers.push(s),n.productObj=t.scene.clone(),n.productObj.position.copy(e.position.clone().setZ(3).setY(-.5)),n.productObj.scale.copy(new o.qb(.65,.65,.65)),s=new o.b(n.productObj),c=s.clipAction(l),c.play(),i.a.animationMixers.push(s)})})(n),function(n){let t=n.building;d.load(u("./building_bottom.glb"),l=>{l.scene.position.copy(n.position),t.bottom=l.scene;let c=new o.b(l.scene),r=new o.J(new o.U(5,5),new o.K({color:1858632}));r.rotateX(-Math.PI/2),r.position.set(0,.075,0),l.scene.add(r);let u=c.clipAction(Object(a.a)(l,"loading.001"));u.timeScale=n.productionRate,t.pickUpAnim=c.clipAction(Object(a.a)(l,"truck_pickup")),t.pickUpAnim.loop=o.F,u.loop=o.F,u.clampWhenFinished=!0,i.a.animationMixers.push(c),t.floors[0]={loadingAnim:u},c.addEventListener("finished",o=>{"loading.001"==o.action.getClip().name&&(t.moneyToBePickedUp=n.profit*t.floorCount,i.a.add(t.productObj),n.hasManager&&t.pickUp(),e.player.new&&"eggs"==n.type&&0==e.player.money&&Object(s.showHint)("Click the egg to sell it!"))})})}(n),function(e){let n=e.building;d.load(u("./building_middle.glb"),t=>{t.scene.position.copy(e.position),n.middleGltf=t})}(n),function(e){let n=e.building;d.load(m("building_top",e.type),t=>{t.scene.position.copy(e.position),t.scene.position.y+=2,n.roof=t.scene})}(n)}(n),l.updateClickable=function(){this.clickable&&i.a.remove(this.clickable);let c=function(e){let n=5+1.2*(e.building.floorCount-1),t=new o.e(4,n,5),i=new o.J(t);return i.position.set(e.position.x,n/2,.5),i.material.visible=!1,i}(n);c.onclick=function(){0==l.floorCount?(e.player.new&&"eggs"==t&&Object(s.showHint)("Hit 'Start selling Eggs'!"),y.menu.style.display="inline-block",function(n){b(n.purchaseCost)?y.menu.className="enabled":y.menu.className="disabled";y.message.innerText="Start selling "+n.name+": ",y.cost.innerText="-"+Object(a.c)(n.purchaseCost),y.menu.onclick=t=>{e.player.new&&"eggs"==n.type&&Object(s.showHint)("Congrats! Click the building to produce an egg!"),n.building.purchase()}}(n)):(-1!=l.moneyToBePickedUp&&l.pickUp(),s.contextMenu.menu.style.display="inline-block",function(e){b(e.upgradeCost)?s.contextMenu.upgrade.className="enabled":s.contextMenu.upgrade.className="disabled";s.contextMenu.upgradeCost.innerText="-"+Object(a.c)(e.upgradeCost),s.contextMenu.upgrade.onclick=n=>{e.building.upgrade()},b(e.managerCost)&&!e.hasManager?s.contextMenu.manager.className="enabled":s.contextMenu.manager.className="disabled";s.contextMenu.managerCost.innerText="-"+Object(a.c)(e.managerCost),s.contextMenu.manager.onclick=n=>{e.building.buyManager()},s.contextMenu.businessInfo.info.innerText=e.name+": "+e.profit+"x"+e.building.floorCount+" = ",s.contextMenu.businessInfo.profit.innerText="+"+Object(a.c)(e.profit*e.building.floorCount)}(n))},i.a.add(c),l.clickable=c},l.addBuilding=function(){i.a.add(l.bottom),l.floorCount=1,l.top.position.y+=2,i.a.add(l.roof),l.moneyToBePickedUp=0},l.purchase=function(){b(n.purchaseCost)&&(f(n.purchaseCost),y.menu.style.display="none",this.addBuilding(),Object(a.b)())},l.pickUp=function(){var t;l.moneyToBePickedUp>0&&(l.pickUpAnim.reset().play(),setTimeout(()=>{i.a.remove(l.productObj),l.manager.idleAnim.stop(),l.manager.waveAnim.reset().play()},1e3),t=l.moneyToBePickedUp,e.player.money+=t,Object(s.updateMoney)(),n.lastPickupTime=Date.now(),Object(a.b)(),e.player.new&&"eggs"==n.type&&(10==e.player.money?Object(s.showHint)("You made $"+l.moneyToBePickedUp+"! Keep clicking to keep selling, or upgrade to make more "+n.type+"!"):e.player.money>=100&&Object(s.showHint)("You now have $"+e.player.money+"! Purchase a manager to automatically sell eggs!"))),l.moneyToBePickedUp=-1,l.floors.forEach(e=>e.loadingAnim.stop()),l.floors[l.floors.length-1].loadingAnim.play()},l.upgrade=function(){b(n.upgradeCost)&&(Object(s.hideHint)(),s.contextMenu.menu.style.display="none",f(n.upgradeCost),l.addFloor(),Object(a.b)())},l.addFloor=function(){let e=l.middleGltf.scene.clone();e.position.y+=2+1.2*(this.floorCount-1),l.roof.position.y=e.position.y+1.2,l.top.position.copy(l.roof.position),i.a.add(e);let t=new o.b(e),s=t.clipAction(Object(a.a)(l.middleGltf,"loading.001"));s.clampWhenFinished=!0,s.loop=o.F,s.timeScale=n.productionRate,this.floors.push({loadingAnim:s}),this.floorCount+=1;for(let e=this.floors.length-1;e>=0;e--){let n=this.floors[e];if(e>0){let t=this.floors[e-1].loadingAnim,o=t.time;o>0&&(n.loadingAnim.time=o,o<t.getClip().duration?n.loadingAnim.play():o>=t.getClip().duration&&(n.loadingAnim.play().paused=!0),t.stop())}else{let e=this.floors[1].loadingAnim;e.time>=e.getClip().duration&&n.loadingAnim.play()}}this.updateClickable();let c=this.floors.length-1;t.addEventListener("finished",()=>{this.floors[c-1].loadingAnim.reset().play()}),i.a.animationMixers.push(t)},l.addManager=function(){n.hasManager=!0,i.a.add(this.manager)},l.buyManager=function(){b(n.managerCost)&&(e.player.new=!1,Object(s.hideHint)(),document.getElementById("context-menu").style.display="none",f(n.managerCost),l.moneyToBePickedUp>0&&l.pickUp(),l.addManager())},l.updateClickable(),d.load(m("manager",t),e=>{e.scene.position.copy(n.position),e.scene.position.x-=2,e.scene.position.z+=2;let t=new o.b(e.scene),s=t.clipAction(Object(a.a)(e,"Idle")),c=t.clipAction(Object(a.a)(e,"Wave"));t.addEventListener("finished",()=>{s.play()}),c.loop=o.F,s.timeScale=.5,s.play(),i.a.animationMixers.push(t),l.manager=e.scene,l.manager.idleAnim=s,l.manager.waveAnim=c}),l.updateClickable()}function m(e,n){try{return u("./"+e+"_"+n+".glb")}catch(n){return u("./"+e+".glb")}}function f(n){e.player.money-=n,Object(s.updateMoney)()}function b(n){return e.player.money-n>=0}const y={menu:document.getElementById("purchase-business"),message:document.getElementById("purchase-business").querySelector(".message"),cost:document.getElementById("purchase-business").querySelector(".cost")}}).call(this,t(0))},,function(e,n,t){e.exports=t.p+"shadow.png"},function(e,n,t){var o={"./building_bottom.glb":13,"./building_middle.glb":14,"./building_top.glb":15,"./building_top_coffeeMugs.glb":16,"./building_top_eggs.glb":17,"./building_top_soccerBalls.glb":18,"./building_top_topHats.glb":19,"./building_top_waffles.glb":20,"./manager.glb":21,"./manager_coffeeMugs.glb":22,"./manager_eggs.glb":23,"./manager_soccerBalls.glb":24,"./manager_topHat.glb":25,"./manager_waffles.glb":26,"./product.glb":27,"./product_coffeeMugs.glb":28,"./product_eggs.glb":29,"./product_soccerBalls.glb":30,"./product_topHats.glb":31,"./product_waffles.glb":32,"./test.glb":33};function i(e){var n=a(e);return t(n)}function a(e){if(!t.o(o,e)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return o[e]}i.keys=function(){return Object.keys(o)},i.resolve=a,e.exports=i,i.id=12},function(e,n,t){e.exports=t.p+"models/building_bottom.glb"},function(e,n,t){e.exports=t.p+"models/building_middle.glb"},function(e,n,t){e.exports=t.p+"models/building_top.glb"},function(e,n,t){e.exports=t.p+"models/building_top_coffeeMugs.glb"},function(e,n,t){e.exports=t.p+"models/building_top_eggs.glb"},function(e,n,t){e.exports=t.p+"models/building_top_soccerBalls.glb"},function(e,n,t){e.exports=t.p+"models/building_top_topHats.glb"},function(e,n,t){e.exports=t.p+"models/building_top_waffles.glb"},function(e,n,t){e.exports=t.p+"models/manager.glb"},function(e,n,t){e.exports=t.p+"models/manager_coffeeMugs.glb"},function(e,n,t){e.exports=t.p+"models/manager_eggs.glb"},function(e,n,t){e.exports=t.p+"models/manager_soccerBalls.glb"},function(e,n,t){e.exports=t.p+"models/manager_topHat.glb"},function(e,n,t){e.exports=t.p+"models/manager_waffles.glb"},function(e,n,t){e.exports=t.p+"models/product.glb"},function(e,n,t){e.exports=t.p+"models/product_coffeeMugs.glb"},function(e,n,t){e.exports=t.p+"models/product_eggs.glb"},function(e,n,t){e.exports=t.p+"models/product_soccerBalls.glb"},function(e,n,t){e.exports=t.p+"models/product_topHats.glb"},function(e,n,t){e.exports=t.p+"models/product_waffles.glb"},function(e,n,t){e.exports=t.p+"models/test.glb"}]]);